<!-- <p>Socket component works!</p>


<button (click)="sendMessage()">Click to send message</button>


<button (click)="sendMessage2()">Click to send req</button>


<button (click)="sendMessage3()">Click to post req</button> -->




<!-- <div class="selected-user">
    <span>To: <span class="name">{{username}}</span></span>
</div>
<div class="chat-container set_max_height" #scrollMe>
    <ul class="chat-box chatContainerScroll">
        <li [ngClass]="{'chat-left': item.user_id == id, 'chat-right': item.user_id !== id}" *ngFor="let item of socketService._chatMessage">
            <div class="chat-avatar">
                <img src="https://www.bootdey.com/img/Content/avatar/avatar3.png" alt="Retail Admin">
                <div class="chat-name">{{_getUserName(item.user_id)}}</div>
            </div>
            <div class="chat-text">
                {{item?.message}}
            </div>
            <div class="chat-hour">{{item?.update_at | date:'h:mm a'}} <span class="fa fa-check-circle"></span></div>
        </li>
    </ul>
    <div class="form-group mt-3 mb-0">
        <input [(ngModel)]="messageText" type="text" class="form-control" (keyup.enter)="sendMessage()" placeholder="Type your message here...">
    </div>
    <button type="button" (click)="fileInput.click()">File select</button>
    <div *ngIf="_filesArray && _filesArray.length > 0">
        <div class="row">
            <div class="col-sm-4" *ngFor="let image of _filesArray">
                <p>{{image?.name}}</p>
                <img src="{{_bindThumbnail(image)}}">
            </div>
        </div>
    </div>
</div> -->


<!-- 
    <div class="selected-user">
        <span>To: <span class="name">{{username}}</span></span>
    </div>
    <div class="chat-container set_max_height" #scrollMe>
        <ul class="chat-box chatContainerScroll">
            <li [ngClass]="{'chat-left': item.user_id == id, 'chat-right': item.user_id !== id}" *ngFor="let item of socketService._chatMessage">
                <div class="chat-avatar">
                    <img src="https://www.bootdey.com/img/Content/avatar/avatar3.png" alt="Retail Admin">
                    <div class="chat-name">{{item.user_id == id ? _myUserName : username}}</div>
                </div>
                <div class="chat-text">
                    {{item?.message}}
                </div>
                <div class="chat-hour">{{item?.update_at | date:'h:mm a'}} <span class="fa fa-check-circle"></span></div>
            </li>
        </ul>
        <div class="form-group mt-3 mb-0">
            <input [(ngModel)]="messageText" type="text" class="form-control" (keyup.enter)="sendMessage()" placeholder="Type your message here...">
        </div>
        <button type="button" (click)="fileInput.click()">File select</button>
        <div *ngIf="_filesArray && _filesArray.length > 0">
            <div class="row">
                <div class="col-sm-4" *ngFor="let image of _filesArray">
                    <p>{{image?.name}}</p>
                    <img src="{{_bindThumbnail(image)}}">
                </div>
            </div>
        </div>
    </div> -->
<!-- new work start here-->
<div class="card">
        <div class="card-header msg_head">
          <div class="d-flex bd-highlight">
            <div class="img_cont">
              <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img">
              <span class="online_icon"></span>
            </div>
            <div class="user_info">
              <span>Chat with {{username}}</span>
              <!-- <p>1767 Messages</p> -->
            </div>
            <div class="video_cam">
              <span><i class="fas fa-video"></i></span>
              <span><i class="fas fa-phone"></i></span>
            </div>
          </div>
          <span id="action_menu_btn"><i class="fas fa-ellipsis-v"></i></span>
          <div class="action_menu">
            <ul>
              <li><i class="fas fa-user-circle"></i> View profile</li>
              <li><i class="fas fa-users"></i> Add to close friends</li>
              <li><i class="fas fa-plus"></i> Add to group</li>
              <li><i class="fas fa-ban"></i> Block</li>
            </ul>
          </div>
        </div>
        <div class="card-body msg_card_body" #scrollMe>
          <div class="d-flex  mb-4" [ngClass]="{'justify-content-end': item.user_id == id, 'justify-content-start': item.user_id !== id}"  *ngFor="let item of socketService._chatMessage">
            <div class="img_cont_msg" *ngIf="item.user_id !== id">
              <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img_msg">
              <div><h6 class="custom-name">{{_getUserName(item.user_id)}}</h6></div>
            </div>
            <div [ngClass]="{'msg_cotainer_send': item.user_id == id, 'msg_cotainer': item.user_id !== id}">
                    {{item?.message}}
              <span [ngClass]="{'msg_time_send': item.user_id == id, 'msg_time': item.user_id !== id}">
                    {{item?.update_at | date:'h:mm a'}}
                </span>
            </div>
            <div class="img_cont_msg" *ngIf="item.user_id == id">
                    <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img_msg">
                  <div><h6 class="custom-name">{{_getUserName(item.user_id)}}</h6></div>
                </div>
          </div>
        </div>
        <div class="card-footer">
          <div class="input-group">
            <div class="input-group-append">
              <span class="input-group-text attach_btn"><i class="fas fa-paperclip"></i></span>
            </div>
            <input type="text" [(ngModel)]="messageText" (keyup.enter)="sendMessage()" class="form-control type_msg" placeholder="Type your message...">
            <!-- <textarea name="" class="form-control type_msg" placeholder="Type your message..."></textarea> -->
            <div class="input-group-append">
              <span class="input-group-text send_btn" (click)="sendMessage()"><i class="fas fa-location-arrow"></i></span>
            </div>
          </div>
        </div>
      </div>
        <input type='file' style="display: none;" #fileInput multiple  accept="image/*;capture=camera" id="cameraInput" name="cameraInput"
       (change)="onFileSelected($event)" />

<input type='file' style="display: none;" #fileInput multiple  accept="image/*;capture=camera" id="cameraInput" name="cameraInput"
(change)="onFileSelected($event)" />